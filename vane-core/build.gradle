plugins {
	id 'com.github.johnrengelman.shadow' version '6.0.0';
}

dependencies {
	implementation group: 'org.bstats', name: 'bstats-bukkit', version: '1.7';
	implementation group: 'io.papermc', name: 'paperlib', version: '1.0.6-SNAPSHOT';
	implementation group: 'org.reflections', name: 'reflections', version: '0.9.12';
	implementation group: 'org.json', name: 'json', version: '20200518';
	implementation group: 'us.dynmap', name: 'dynmap-api', version: '3.1-SNAPSHOT';
	implementation project(':vane-annotations');
}

shadowJar {
	dependencies {
		include(dependency('org.bstats:bstats-bukkit'));
		include(dependency('io.papermc:paperlib'));
		include(dependency('org.reflections:reflections'));
		include(dependency('org.json:json'));
		include(dependency('us.dynmap:dynmap-api'));
		include(dependency(':vane-annotations'));
	}
	relocate 'org.bstats', 'org.oddlama.vane.external.bstats';
	relocate 'io.papermc.lib', 'org.oddlama.vane.external.paperlib';
	relocate 'org.reflections', 'org.oddlama.vane.external.reflections';
	relocate 'org.json', 'org.oddlama.vane.external.json';
	relocate 'org.dynmap', 'org.oddlama.vane.external.dynmap';
}

copyJar {
	from shadowJar;
	duplicatesStrategy 'include';
	rename '(.*)-all.jar', '$1.jar';
}
